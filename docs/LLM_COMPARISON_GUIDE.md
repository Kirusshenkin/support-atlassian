# –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –≤—ã–±–æ—Ä—É LLM –¥–ª—è AI Confluence Assistant

## üéØ –ë—ã—Å—Ç—Ä—ã–π –≤—ã–±–æ—Ä

### –£ –º–µ–Ω—è –µ—Å—Ç—å –±—é–¥–∂–µ—Ç –∏ –Ω—É–∂–Ω–æ –ª—É—á—à–µ–µ –∫–∞—á–µ—Å—Ç–≤–æ
‚Üí **Anthropic Claude 3 Sonnet**

### –ù—É–∂–µ–Ω –±–∞–ª–∞–Ω—Å –∫–∞—á–µ—Å—Ç–≤–∞ –∏ —Ü–µ–Ω—ã
‚Üí **Google Gemini 1.5 Pro** –∏–ª–∏ **OpenAI GPT-4o-mini**

### –î–∞–Ω–Ω—ã–µ –Ω–µ –¥–æ–ª–∂–Ω—ã –ø–æ–∫–∏–¥–∞—Ç—å –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—É
‚Üí **–õ–æ–∫–∞–ª—å–Ω–∞—è –º–æ–¥–µ–ª—å Qwen 2.5** (14B –∏–ª–∏ 32B)

### –ù—É–∂–Ω–∞ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è —Å–∫–æ—Ä–æ—Å—Ç—å –æ—Ç–≤–µ—Ç–æ–≤
‚Üí **–õ–æ–∫–∞–ª—å–Ω–∞—è –º–æ–¥–µ–ª—å –Ω–∞ GPU** –∏–ª–∏ **GPT-4o-mini**

## üìä –î–µ—Ç–∞–ª—å–Ω–æ–µ —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ

### –ü–æ –∫–∞—á–µ—Å—Ç–≤—É –ø–æ–Ω–∏–º–∞–Ω–∏—è —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–æ–π –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏:
1. **Claude 3 Opus** - —ç—Ç–∞–ª–æ–Ω –∫–∞—á–µ—Å—Ç–≤–∞
2. **GPT-4o** - –æ—á–µ–Ω—å –±–ª–∏–∑–∫–æ –∫ Claude
3. **Claude 3 Sonnet** - –æ—Ç–ª–∏—á–Ω—ã–π –±–∞–ª–∞–Ω—Å
4. **Gemini 1.5 Pro** - —Ö–æ—Ä–æ—à–µ–µ –∫–∞—á–µ—Å—Ç–≤–æ
5. **Qwen 2.5 32B** (–ª–æ–∫–∞–ª—å–Ω–∞—è) - –ø—Ä–∏–±–ª–∏–∂–∞–µ—Ç—Å—è –∫ GPT-3.5
6. **GPT-4o-mini** - –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –¥–ª—è –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–∞ –∑–∞–¥–∞—á

### –ü–æ —Ä–∞–±–æ—Ç–µ —Å —Ä—É—Å—Å–∫–∏–º —è–∑—ã–∫–æ–º:
1. **Claude 3 (–ª—é–±–∞—è –≤–µ—Ä—Å–∏—è)** - –ø—Ä–µ–≤–æ—Å—Ö–æ–¥–Ω–æ
2. **Qwen 2.5** - –æ—Ç–ª–∏—á–Ω–æ, –æ—Å–æ–±–µ–Ω–Ω–æ –¥–ª—è —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏—Ö —Ç–µ–∫—Å—Ç–æ–≤
3. **GPT-4o** - –æ—á–µ–Ω—å —Ö–æ—Ä–æ—à–æ
4. **Saiga-Llama3** - —Ö–æ—Ä–æ—à–æ –¥–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–π –º–æ–¥–µ–ª–∏
5. **YandexGPT Pro** - –ø—Ä–∏–µ–º–ª–µ–º–æ, –Ω–æ —É—Å—Ç—É–ø–∞–µ—Ç –≤—Å–µ–º –≤—ã—à–µ

## üß™ –ö–∞–∫ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –º–æ–¥–µ–ª–∏ –Ω–∞ –≤–∞—à–∏—Ö –¥–∞–Ω–Ω—ã—Ö

### 1. –°–æ–∑–¥–∞–π—Ç–µ —Ç–µ—Å—Ç–æ–≤—ã–π –Ω–∞–±–æ—Ä –≤–æ–ø—Ä–æ—Å–æ–≤
–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `test_questions.txt`:
```
–ö–∞–∫ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—é –≤ API?
–ö–∞–∫–∏–µ –µ—Å—Ç—å –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –ø–æ rate limiting?
–û–ø–∏—à–∏ –ø—Ä–æ—Ü–µ—Å—Å –¥–µ–ø–ª–æ—è –Ω–∞ production
–ö–∞–∫–∏–µ –º–µ—Ç—Ä–∏–∫–∏ –Ω—É–∂–Ω–æ –º–æ–Ω–∏—Ç–æ—Ä–∏—Ç—å?
–ö–∞–∫ –æ—Ç–∫–∞—Ç–∏—Ç—å —Ä–µ–ª–∏–∑ –≤ —Å–ª—É—á–∞–µ –ø—Ä–æ–±–ª–µ–º?
```

### 2. –°–∫—Ä–∏–ø—Ç –¥–ª—è —Å—Ä–∞–≤–Ω–µ–Ω–∏—è –º–æ–¥–µ–ª–µ–π
–°–æ–∑–¥–∞–π—Ç–µ `scripts/compare_llms.py`:
```python
import os
import time
from datetime import datetime
import pandas as pd

# –ò–º–ø–æ—Ä—Ç–∏—Ä—É–π—Ç–µ –≤–∞—à—É —Ñ–∞–±—Ä–∏–∫—É create_llm –∏–∑ qa_service

def test_llm(provider, model, questions):
    """–¢–µ—Å—Ç–∏—Ä—É–µ—Ç LLM –Ω–∞ –Ω–∞–±–æ—Ä–µ –≤–æ–ø—Ä–æ—Å–æ–≤"""
    os.environ["LLM_PROVIDER"] = provider
    os.environ[f"{provider.upper()}_MODEL"] = model
    
    results = []
    for question in questions:
        start = time.time()
        
        # –ó–¥–µ—Å—å –≤—ã–∑–æ–≤ –≤–∞—à–µ–≥–æ QA —Å–µ—Ä–≤–∏—Å–∞
        answer = call_qa_service(question)
        
        duration = time.time() - start
        
        results.append({
            "provider": provider,
            "model": model,
            "question": question,
            "answer": answer,
            "duration": duration
        })
    
    return results

# –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –º–æ–¥–µ–ª–µ–π –¥–ª—è —Ç–µ—Å—Ç–∞
models_to_test = [
    ("anthropic", "claude-3-sonnet-20240229"),
    ("openai", "gpt-4o-mini"),
    ("ollama", "qwen2.5:14b"),
    # –î–æ–±–∞–≤—å—Ç–µ –¥—Ä—É–≥–∏–µ –º–æ–¥–µ–ª–∏
]

# –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤
all_results = []
for provider, model in models_to_test:
    print(f"–¢–µ—Å—Ç–∏—Ä—É—é {provider}/{model}...")
    results = test_llm(provider, model, questions)
    all_results.extend(results)

# –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
df = pd.DataFrame(all_results)
df.to_csv(f"llm_comparison_{datetime.now():%Y%m%d_%H%M}.csv")
```

### 3. –ö—Ä–∏—Ç–µ—Ä–∏–∏ –æ—Ü–µ–Ω–∫–∏

–ü—Ä–∏ –≤—ã–±–æ—Ä–µ –º–æ–¥–µ–ª–∏ –æ—Ü–µ–Ω–∏—Ç–µ:

‚úÖ **–¢–æ—á–Ω–æ—Å—Ç—å –æ—Ç–≤–µ—Ç–æ–≤**
- –ü—Ä–∞–≤–∏–ª—å–Ω–æ –ª–∏ –º–æ–¥–µ–ª—å –ø–æ–Ω—è–ª–∞ –≤–æ–ø—Ä–æ—Å?
- –ü–æ–ª–Ω—ã–π –ª–∏ –æ—Ç–≤–µ—Ç?
- –ï—Å—Ç—å –ª–∏ –≥–∞–ª–ª—é—Ü–∏–Ω–∞—Ü–∏–∏?

‚úÖ **–ü–æ–ª–µ–∑–Ω–æ—Å—Ç—å**
- –ú–æ–∂–Ω–æ –ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –æ—Ç–≤–µ—Ç –±–µ–∑ –ø—Ä–∞–≤–æ–∫?
- –î–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –ª–∏ –¥–µ—Ç–∞–ª–µ–π?

‚úÖ **–°–∫–æ—Ä–æ—Å—Ç—å**
- –ü—Ä–∏–µ–º–ª–µ–º–æ –ª–∏ –≤—Ä–µ–º—è –æ—Ç–≤–µ—Ç–∞?
- –ö–∞–∫ –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ—Ç—Å—è –ø—Ä–∏ –Ω–∞–≥—Ä—É–∑–∫–µ?

‚úÖ **–°—Ç–æ–∏–º–æ—Å—Ç—å**
- –°–∫–æ–ª—å–∫–æ —Å—Ç–æ–∏—Ç –æ–±—Ä–∞–±–æ—Ç–∫–∞ —Å—Ä–µ–¥–Ω–µ–≥–æ –≤–æ–ø—Ä–æ—Å–∞?
- –ö–∞–∫ —Ä–∞—Å—Ç—É—Ç –∑–∞—Ç—Ä–∞—Ç—ã —Å –æ–±—ä–µ–º–æ–º?

## üí° –ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ —Å–æ–≤–µ—Ç—ã

### 1. –ù–∞—á–Ω–∏—Ç–µ —Å –º–∞–ª–æ–≥–æ
- –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å GPT-4o-mini –∏–ª–∏ Claude Sonnet
- –°–æ–±–µ—Ä–∏—Ç–µ —Ä–µ–∞–ª—å–Ω—ã–µ –≤–æ–ø—Ä–æ—Å—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- –û—Ü–µ–Ω–∏—Ç–µ, –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –ª–∏ –∫–∞—á–µ—Å—Ç–≤–∞

### 2. –ì–∏–±—Ä–∏–¥–Ω—ã–π –ø–æ–¥—Ö–æ–¥
```python
def smart_llm_selection(question: str):
    # –ü—Ä–æ—Å—Ç—ã–µ –≤–æ–ø—Ä–æ—Å—ã - –±—ã—Å—Ç—Ä–∞—è –º–æ–¥–µ–ª—å
    if len(question.split()) < 10:
        return "gpt-4o-mini"
    
    # –°–ª–æ–∂–Ω—ã–µ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –≤–æ–ø—Ä–æ—Å—ã - –ª—É—á—à–∞—è –º–æ–¥–µ–ª—å
    if any(word in question.lower() for word in ["–∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞", "–¥–∏–∑–∞–π–Ω", "–ø–æ—á–µ–º—É"]):
        return "claude-3-sonnet"
    
    # –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é - –±–∞–ª–∞–Ω—Å
    return "gemini-1.5-pro"
```

### 3. –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∫–∞—á–µ—Å—Ç–≤–∞
- –õ–æ–≥–∏—Ä—É–π—Ç–µ –≤—Å–µ –≤–æ–ø—Ä–æ—Å—ã –∏ –æ—Ç–≤–µ—Ç—ã
- –°–æ–±–∏—Ä–∞–π—Ç–µ –æ–±—Ä–∞—Ç–Ω—É—é —Å–≤—è–∑—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- –†–µ–≥—É–ª—è—Ä–Ω–æ –∞–Ω–∞–ª–∏–∑–∏—Ä—É–π—Ç–µ –Ω–µ—É–¥–∞—á–Ω—ã–µ –æ—Ç–≤–µ—Ç—ã

## ‚ö†Ô∏è –ß–µ–≥–æ –∏–∑–±–µ–≥–∞—Ç—å

### ‚ùå YandexGPT –¥–ª—è –∫—Ä–∏—Ç–∏—á–Ω—ã—Ö —Å–∏—Å—Ç–µ–º
- –ö–∞—á–µ—Å—Ç–≤–æ –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ –Ω–∏–∂–µ –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –∫—Ä–∏—Ç–∏—á–Ω–æ —Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ –†–§
- –õ—É—á—à–µ —Ä–∞—Å—Å–º–æ—Ç—Ä–∏—Ç–µ –ª–æ–∫–∞–ª—å–Ω—É—é Qwen 2.5

### ‚ùå –°–ª–∏—à–∫–æ–º –º–∞–ª–µ–Ω—å–∫–∏–µ –º–æ–¥–µ–ª–∏
- –ú–æ–¥–µ–ª–∏ –º–µ–Ω—å—à–µ 7B –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ —á–∞—Å—Ç–æ –≥–∞–ª–ª—é—Ü–∏–Ω–∏—Ä—É—é—Ç
- –î–ª—è —Ä—É—Å—Å–∫–æ–≥–æ —è–∑—ã–∫–∞ –º–∏–Ω–∏–º—É–º 14B

### ‚ùå –≠–∫–æ–Ω–æ–º–∏—è –Ω–∞ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–º –º–µ—Å—Ç–µ
- –†–∞–∑–Ω–∏—Ü–∞ –≤ —Å—Ç–æ–∏–º–æ—Å—Ç–∏ –º–µ–∂–¥—É GPT-4o-mini –∏ Claude Sonnet –Ω–µ–±–æ–ª—å—à–∞—è
- –ù–æ —Ä–∞–∑–Ω–∏—Ü–∞ –≤ –∫–∞—á–µ—Å—Ç–≤–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –∫—Ä–∏—Ç–∏—á–Ω–æ–π

## üìà –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º–∞—è —Å—Ç—Ä–∞—Ç–µ–≥–∏—è –º–∏–≥—Ä–∞—Ü–∏–∏

1. **–ù–µ–¥–µ–ª—è 1-2**: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å Claude Sonnet
2. **–ù–µ–¥–µ–ª—è 3-4**: –ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ª–æ–∫–∞–ª—å–Ω—ã—Ö –º–æ–¥–µ–ª–µ–π
3. **–ú–µ—Å—è—Ü 2**: –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∏ –≤—ã–±–æ—Ä —Ñ–∏–Ω–∞–ª—å–Ω–æ–π –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
4. **–ú–µ—Å—è—Ü 3**: –í–Ω–µ–¥—Ä–µ–Ω–∏–µ –≥–∏–±—Ä–∏–¥–Ω–æ–≥–æ –ø–æ–¥—Ö–æ–¥–∞ –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏

## üîó –ü–æ–ª–µ–∑–Ω—ã–µ —Å—Å—ã–ª–∫–∏

- [Anthropic Claude](https://www.anthropic.com/claude) - –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- [OpenAI Platform](https://platform.openai.com/) - –∫–æ–Ω—Å–æ–ª—å –∏ —Ü–µ–Ω—ã
- [Ollama Models](https://ollama.ai/library) - –∫–∞—Ç–∞–ª–æ–≥ –ª–æ–∫–∞–ª—å–Ω—ã—Ö –º–æ–¥–µ–ª–µ–π
- [LLM Leaderboard](https://huggingface.co/spaces/lmsys/chatbot-arena-leaderboard) - —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ –º–æ–¥–µ–ª–µ–π 